<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>JavaScript Lint</title>
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <header id="myheader">
            <h4>
                JavaScript Lint
            </h4>
        </header>

        <nav id="navigation">
            <ul>
                <li><a href="#first-section">1. Какво е linter?</a></li>
                <li><a href="#second-section">2. Представяне на JavaScript Lint</a></li>
                <li><a href="#third-section">3. Какво открива JavaScript Lint?</a></li>
                <li><a href="#fourth-section">4. Начини на използване </a></li>
                <li><a href="#fifth-section">5. Конфигуриране</a></li>
                <li><a href="#sixth-section">6. Опции</a></li>
                <li><a href="#seventh-section">7. Примерна употреба</a></li>
                <li><a href="#eigth-section">8. Сравнение със съвременните инструменти</a></li>
                <li><a href="#ninth-section">9. Заключение</a></li>
                <li><a href="#cited-literature">Цитирана литература</a></li>
                <li><a href="#figure-list">Списък с фигури</a></li>
                <li><a href="#tables-list">Списък с таблици</a></li>
                <li><a href="#tables-list">Списък с примерен програмен код</a></li>
            </ul>
        </nav>

        <article id="blogpost">
            <section id="first-section">
                <h2>Какво е linter?</h2>
                <p>
                    На първо място трябва да кажем, че linter (lint и linter са синоними) наричаме
                    софтуерни инструменти, които извършват анализ на изходния код на програмата и
                    помагат за откриване на някои често срещани грешки и проблеми. Те също така
                    могат да бъдат използвани и за прилагане на конкретни стилистични правила за
                    писане на код, наложени от дадена организацията (style guides).
                </p>
                <p>
                    Използването на linter помага бързо да се справим с потенциален проблем, дори
                    преди той да се проявил като грешка или изключение по време на изпълнение на
                    програмата. Възможно грешката да е елементарна като използване на недекларирана
                    променлива, но ако трябва да дебъгваме може да загубим изключително много време
                    да намерим конкретната линия код с грешката.
                </p>
                <p>
                    При изпълнението на инструмента откриването на проблем се автоматизира и
                    ускорява значително. Той има дефинирани правила за езика, за който се използва и
                    при откриването на нарушения генерира предупреждение кое място в кода какво
                    конкретно правило нарушава. Някои инструменти има опция автоматично и да
                    поправят грешките.
                </p>
                <p>
                    Като подмножество на linter програмите можем да причислим и инструментите, които
                    само форматират кода спрямо някакви правила, т.е. правят го да изглежда
                    по-красив. Пример за това е Prettier, който главно е предназначен за HTML, CSS и
                    JavaScript.<a href="#cited-04">[4]</a>, <a href="#cited-05">[5]</a>
                </p>
            </section>
            <section id="second-section">
                <h2>Представяне на JavaScript Lint</h2>
                <p>
                    JavaScript Lint е инструмент, предназначен за извършване на статичен анализ на
                    JavaScript код. Неговата разработка е била активна в начало на века, като за
                    последен път през 2007 година на официалния сайт има някакви новини или
                    обновления.
                </p>
                <figure id="figure-01">
                    <img
                        src="img/01-javascript-lint-site.png"
                        alt="JavaScript Lint website"
                        width="780"
                        height="360"
                    />
                    <figcaption>Фигура 1. Уеб сайта на JavaScript Lint, секция "News"</figcaption>
                </figure>
                <p>
                    Инструментът е безплатен, с отворен код. От официалния му сайт
                    <a href="#cited-01">[1]</a> е възможно да се изтегли готовия за работа
                    инструмент или архив, съдържащ изходния код. Има линк към хранилище на
                    Subversion, но не изглежда, че той не е активен към момента на писането.
                </p>
                <p>
                    Платформите на които може да се използва са Windows, като не е специфицирана
                    версията, но най-вероятно към времето на последна активност това е било XP или
                    Vista. Другият вариант е Mac OS X, където също не е упомената версията на
                    операционната система.
                </p>
            </section>
            <section id="third-section">
                <h2>Какво открива JavaScript Lint?</h2>
                <p>
                    Тъй като JavaScript е език за програмиране, който се интерпретира, слабо и
                    динамично типизиран, то нуждата от инструменти, които да ни предпазват от грешки
                    е задължителен. Нека разгледаме някои от най-често срещаните грешки при писане
                    на JavaScript код и тези, които JavaScript Lint ни помага бързо да открием и
                    поправим <a href="#cited-01">[1]</a>.
                </p>
                <ul>
                    <li>
                        <p>
                            <b>използване на недекларирана променлива или метод :</b>
                            предизвиква се неочаквано поведение на програмата. Такива грешки могат
                            да се открият при наличие на достатъчно добри тестове, но с използването
                            на lint инструменти идентифицирането се улеснява значително.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>променлива ли метод, който никога не се използва в кода : </b>чрез
                            откриването и отстраняването на този проблем се премахва ненужен ресурс
                        </p>
                    </li>
                    <li>
                        <p>
                            <b
                                >блок от код, който никога не се изпълнява, заради return, continue,
                                break или throw оператори :
                            </b>
                            идентифицира се евентуален проблем със потока на изпълнението на
                            програмата или ненужен фрагмент от код
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>пропуснати ограждащи скоби на изразите if, for, while : </b>това води
                            до влошаване на четливостта на кода, особено ако на реда след оператора
                            има и някакъв друг израз. Потенциално място за бъгове, както и създава
                            допълнителна работа ако трябва в тялото след оператора да се добави
                            повече от един израз
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>липсващи break изрази при case случаите на switch оператор : </b>това
                            е потенциално място за бъгове свързани с потока на изпълнението на
                            програмата.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>нарушаването на правила, записани в даден style guide : </b>
                            непостоянството в начина, по който пишем кода го прави нечетлив и
                            изглежда неприятно. При налагане на единен стил, се подобрява
                            четливостта и се създава чувството за колективно притежание но кода
                            (code ownership), т.е. четейки код, който не е писан от теб, но изглежда
                            стилистично като твоя
                        </p>
                    </li>
                </ul>
            </section>
            <section id="fourth-section">
                <h2>Начини на използване</h2>
                <p>
                    Съществуват няколко начина, според документацията на JavaScript Lint
                    <a href="#cited-01">[1]</a>, по които можем да интегрираме в процеса ни на
                    работа.
                </p>
                <ul>
                    <li>
                        <p>
                            <b>директно пускаме програмата, чрез нейния CLI : </b>може би
                            най-неудобния вариант, тъй като изхода, който ще получим няма да е
                            толкова четим и интерактивността със самия код почти липсва. Въпреки
                            това не се изискват никакви допълнителни настройки, а евентуално само
                            указване на конфигурационен файл, от който да посочва за какви грешки да
                            се търси. Подходът е приложим при работа с малки и средни проекти,
                            където просто искаме да се уверим, че няма никакви сериозни грешки.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>използване от контекстното меню на Windows Explorer : </b>в
                            документацията на JavaScript Lint е посочен този вариант, като идеята е
                            от Windows Explorer да кликнем с десен бутон върху файл с JavaScript код
                            и така да активираме инструмента. Резултатите вероятно отново ще получим
                            в терминала и отново сме в горния случай – ниска интерактивност и дори
                            още по ниска практичност, защото трябва да повтаряме действието за всеки
                            .js файл, който имаме в проекта.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>приставка/добавка в IDE или редактор : </b>практичен и удобен
                            вариант, като са налице някои предимства. Обикновено има обособена
                            секция за изхода от инструмента. Също така при кликване върху намерените
                            грешки, които са открити курсорът се отвежда на мястото на грешката,
                            показване на потенциални решения на проблема и конфигуриране на
                            инструмента от настройките на IDE-то. За съжаление поради спрялата
                            разработка на JavaScript Lint не се поддържат съвременни IDE-та или
                            редактори.
                        </p>
                    </li>
                    <li>
                        <p>
                            <b>уеб вариант : </b>можем да отбележим и наличието на уеб вариант на
                            инструмента на сайта му<a href="#cited-01">[1]</a>. За съжаление
                            установихме, че той не работи правилно и не дава никакъв изход.
                        </p>
                    </li>
                </ul>
                <figure id="figure-02">
                    <img
                        src="img/02-jsl-online.png"
                        alt="JavaScript Lint online"
                        width="800"
                        height="370"
                    />
                    <figcaption>Фигура 2. JavaScript Lint online</figcaption>
                </figure>
                <p>
                    Използван е примерния <a href="#code-01">Код 1.</a>. Грешката е, че променливата
                    sum не е дефинирана, а е използвана в пресмятането. Инструментът не показва и
                    предпреждение за изпуснати скоби около for цикъла.
                </p>
                <p>
                    Като друг подход, който става все по-популярен напоследък е
                    <b>като стъпка от CI/CD</b>. Идеята е процесът на разработка да бъде споходен от
                    множество помощни дейности, които да се погрижат кода да е максимално близко до
                    работно състояние. инструмента на сайта му. Отново за съжаление, тъй като
                    JavaScript Lint не се разработва активно, той не се предлага като опция от
                    актуалните CI системи.<a
                        href="https://css-tricks.com/continuous-integration-the-what-why-and-how/"
                        >[6]</a
                    >
                </p>
            </section>
            <section id="fifth-section">
                <h2>Конфигуриране</h2>
                <p>
                    Ние ще използваме софтуера JavaScript Lint при версия 0.3.0 за Windows,
                    използвайки файла jsl-0.3.0-win32.zip, изтеглен от сайта на инструмента[1].
                    Изпълняваме софтуера под ОС Windows 10.
                </p>
                <p>
                    Грешките, за които търси могат да се конфигурират по два начина. Единият е
                    използвайки вградените настройки, а вторият е наличие на конфигурационен файл,
                    който да бъде подаден като параметър на програмата.
                </p>
                <p>
                    JavaScript Lint предлага основно работа чрез конзолен интерфейс. Като основни
                    параметри са път до конфигурационен файл и файлове с JavaScript код, които да
                    бъдат прегледани.
                </p>
                <figure id="figure-03">
                    <img
                        src="img/03-jsl-options.png"
                        alt="JavaScript Lint CLI options"
                        width="810"
                        height="315"
                    />
                    <figcaption>Фигура 3. JavaScript Lint CLI опции</figcaption>
                </figure>
            </section>
            <section id="sixth-section">
                <h2>Опции</h2>
                <h4>Как се активират и деактивират опции?</h4>
                <p>
                    Опциите на инструмента се задават в конфигурационния файл, който се подава при
                    изпълнение. Опция се активира като на реда първо се постави знака '+' (плюс) и
                    след това се напише името на опцията. Алтернативно опция се деактивира като или
                    се постави '-' (минус) вместо плюс, или редът се закоментира, или опцията въобще
                    не се пише. Като най-добра практика изглежда метода за закоментиране, тъй като
                    знаците плюс и минус не се различават особено и е възможно да не забележим, че
                    неволно сме оставили някоя опция изключена.
                </p>
                <h4>Някои от най-полезните опции</h4>
                <p>
                    В конфигурационния файл по подразбиране са представени всички възможни опции на
                    JavaScript Lint. Тук ще изредим някои от тези, които ни предпазват от неволни
                    грешки и е почти задължително да ги използваме.
                </p>
                <figure id="table-01">
                    <table id="mytable">
                        <colgroup>
                            <col style="width: 230px;" />
                            <col style="width: 550px;" />
                        </colgroup>
                        <thead>
                            <tr>
                                <th><p>опция</p></th>
                                <th><p>какво се докладва като грешка</p></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>+no_return_value</td>
                                <td>
                                    <p>
                                        функцията не връща резултат от всичките си потоци на
                                        изпъление
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>+equal_as_assign</td>
                                <td>
                                    <p>объркване на операторите = и ==</p>
                                </td>
                            </tr>
                            <tr>
                                <td>+redeclared_var</td>
                                <td><p>редеклариране на идентификатор</p></td>
                            </tr>
                            <tr>
                                <td>+missing_semicolon</td>
                                <td><p>пропусканати точка и запетия</p></td>
                            </tr>
                            <tr>
                                <td>+unreachable_code</td>
                                <td><p>недостижим код</p></td>
                            </tr>
                            <tr>
                                <td>+missing_break</td>
                                <td><p>пропуснат break във switch</p></td>
                            </tr>
                            <tr>
                                <td>+block_without_braces</td>
                                <td>
                                    <p>блок от код, който не е ограден със фигурни скоби { }</p>
                                </td>
                            </tr>
                            <tr>
                                <td>+nested_comment</td>
                                <td><p>коментар, вложен в друг коментар</p></td>
                            </tr>
                            <tr>
                                <td>+octal_number</td>
                                <td>
                                    <p>
                                        започване на числов литерал с '0' задава числото в осмична
                                        система
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>+context</td>
                                <td>
                                    <p>показване мястото в кода, в който е намерена грешката</p>
                                </td>
                            </tr>
                            <tr>
                                <td>+always_use_option_explicit</td>
                                <td>
                                    <p>
                                        използване на недеклариран идентификатор(променлива, метод)
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>+define &lt;indentifier&gt;</td>
                                <td>
                                    <p>
                                        игнориране на горното предупреждение за определени системни
                                        символи, например window, document, console
                                    </p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <figcaption>
                        Таблица 1. Опциите на JavaScript Lint
                    </figcaption>
                </figure>
            </section>
            <section id="seventh-section">
                <h2>Примерна употреба</h2>
                <p>
                    Ще направим един прост пример, за да покажем основните опции на JavaScript Lint.
                    За целта ще използваме наш конфигурационен файл, който е копие на този по
                    подразбиране с тази разлика, че са включени предупрежденията за използване на
                    недеклариран идентификатор (променлива, метод или клас), нуждата от ограждащи
                    скоби около оператор и сме дефинирали console като глобален обект.
                </p>
                <p>
                    Файлът, който ще тестваме е <a href="#code-04">Код 4.</a>. В него има една
                    функция, която показва различни съобщения в за различните дни от седмицата, като
                    обаче са допуснати някои грешки.
                </p>
                <figure id="figure-04">
                    <img
                        src="img/04-code-fragment.png"
                        alt="code-fragment"
                        width="800"
                        height="325"
                    />
                    <figcaption>
                        Фигура 4. Тествания JavaScript файл
                    </figcaption>
                </figure>
                <p>Изпълняваме програмата локално с Node.js и наблюдаваме следния изход</p>
                <figure id="figure-05">
                    <img src="img/05-code-output.png" alt="code-ouput" width="800" height="200" />
                    <figcaption>
                        Фигура 5. Резултата от изпълнението на файла
                    </figcaption>
                </figure>
                <p>
                    Това което се случва, е че викаме функцията с аргумент, който трябва да
                    предизвика съобщение за почивен ден, но виждаме и още един ред, който е
                    съобщението за работен ден.
                </p>
                <p>
                    Преди да търсим грешката с дебъгване, ще пуснем JavaScript Lint от Windows
                    PowerShell като използваме вградения терминален емулатор в Visual Studio Code.
                    Също така вместо да пишем командата директно на реда, предварително сме я
                    написали и запазили в batch файла
                    <a href="#code-02">Код 2.</a>.
                </p>
                <figure id="figure-06">
                    <img src="img/06-jsl-output.png" alt="jsl-output" width="800" height="365" />
                    <figcaption>Фигура 6. Изход от JavaScript Lint</figcaption>
                </figure>
                <p>
                    Batch скрипта сме написали изрично така, че на първия ред от изхода се вижда
                    каква команда и с какви аргументи се е изпълнила. Подаваме конфигурационен файл
                    <a href="#code-03">Код 3.</a> и файл с JavaScript
                    <a href="#code-04">Код 4.</a> за преглеждане от инструмента. Следват два реда,
                    които показват информация за версията и автора на инструмента.
                </p>
                <p>
                    След това виждаме името на файла, който е бил сканиран и една след друга се
                    изписани намерените грешки. На първо място е причината за грешката, която
                    наблюдавахме в изхода от програмата. Това е пропуснат <code>break</code>, който
                    трябва да е след <code>console.log()</code> на 9-ти ред.
                </p>
                <p>
                    Другите предупреждения, които виждаме са за пропусната <code>;</code> след
                    извикването на функцията <code>dayOfTheWeek()</code> на 19-ти ред. Също така
                    JavaScript Lint ни предупреждава и за неявното деклариране на променливата
                    <code>myDay</code> на 17-ти ред, както и използването ѝ при викането на
                    функцията на 19-ти ред.
                </p>
                <h4>След оправяне на грешките</h4>
                <p>
                    Нека добавим <code>break</code> на 10-ти ред, да дефинираме правилно
                    променливата и да поставим <code>;</code> след извикването на функцията. Това е
                    файлът <a href="#code-5">Код 5.</a>
                </p>
                <figure id="figure-07">
                    <img
                        src="img/07-code-fragment-fixed.png"
                        alt="js-file-fixed"
                        width="800"
                        height="325"
                    />
                    <figcaption>Фигура 7. Поправен JavaScript файл</figcaption>
                </figure>
                <p>
                    Сега да изпълним кода с Node и JavaScript Lint да видим дали всичко е наред.
                </p>
                <figure id="figure-08">
                    <img
                        src="img/08-code-and-jsl-output-fixed.png"
                        alt="code-and-jsl-output"
                        width="800"
                        height="200"
                    />
                    <figcaption>
                        Фигура 8. Изход от изпълнението на файла и JavaScript Lint
                    </figcaption>
                </figure>
                <p>
                    Както виждаме от Фигура 8. изходът на програмата е правилен, а инструментът не
                    открива никакви проблеми.
                </p>
            </section>
            <section id="eigth-section">
                <h2>
                    Сравнение на JavaScript Lint със съвременните инструменти
                    <a href="#cited-03">[3]</a>
                </h2>
                <p>
                    Ако трябва да погледнем как стоят нещата сега, то за съжаление JavaScript Lint
                    изглежда остарял и не особено практичен за използване в все по-големите и
                    по-сложни проекти, с които се сблъскване днес.
                </p>
                <h4>Основни недостатъци</h4>
                <p>
                    Като минуси на JavaScript Lint можем да посочим невъзмоността му за интегриране
                    със съвременните редактори и среди за разработка, като това се дължи на спрялата
                    му разработка. По същата причина няма опция за автоматична поправка на някои
                    прости грешки, като например добавяне на липсващи ограждащи скоби или точка и
                    запетая. Тази функционалност се предлага от популярните lint за JavaScript като
                    JSLint или ESLint. Друг недостатък е факта, че инструментът не предлага никакви
                    интерактивност по време на отстраняване на грешките, защото той просто изписва
                    на кой ред са без възможност да ни отведе до там.
                </p>
                <h4>Основни предимства</h4>
                <p>
                    Все пак JavaScript Lint може да бъде използван в малки проекти или за обучителна
                    функция, защото е сравнително прост за употреба. Факта, че не изисква никакви
                    допълнителни зависимости е интересен на фона на днешната картина, където
                    повечето негови конкурентни изискват поне Node.js, за да се изпълняват.
                </p>
            </section>
            <section id="ninth-section">
                <h2>Заключение</h2>
                <p>
                    В заключение можем да кажем, че JavaScript Lint е един от основоположниците на
                    lint инструментите за езика JavaScript. Именно поради това, той носи белезите на
                    своето време - предлага малко на брой, но въпреки това полезни опции, прост за
                    инсталиране и употреба. За съжаление в съвременните проекти сложността се
                    увеличава все повече и повече и по-новите инструменти предлагат по-добри и
                    практични възможности.
                </p>
            </section>
            <section id="cited-literature">
                <h2>Цитирана литература</h2>
                <p>
                    <a href="http://www.javascriptlint.com/" id="cited-01"
                        >[1] сайт на JavaScript Lint, публикуван: неизвестно, последно посетен:
                        2020-04-05 i</a
                    >
                </p>
                <p>
                    <a
                        href="https://barrgroup.com/Embedded-Systems/How-To/Lint-Static-Analysis-Tool"
                        id="cited-02"
                        >[2] Nigel Jones, "How to Use Lint for Static Code Analysis", публикуван:
                        2002-05-01, последно посетен: 2020-04-05</a
                    >
                </p>
                <p>
                    <a
                        href="https://www.sitepoint.com/comparison-javascript-linting-tools/"
                        id="cited-03"
                        >[3] Jani Hartikainen, "A Comparison of JavaScript Linting Tools",
                        публикуван: 2015-03-05, последно посетен: 2020-04-05</a
                    >
                </p>
                <p>
                    <a
                        href="https://www.codereadability.com/what-are-javascript-linters/"
                        id="cited-04"
                        >[4] "What are JavaScript linters?", публикуван: 2015-11-01, последно
                        посетен : 2020-04-05</a
                    >
                </p>
                <p>
                    <a
                        href="https://medium.com/dailyjs/why-you-should-always-use-a-linter-and-or-pretty-formatter-bb5471115a76"
                        id="cited-05"
                        >[5] Alberto Gimeno, "Why you should always use a Linter", публикуван:
                        2017-06-22, последно посетен : 2020-04-05</a
                    >
                </p>
                <p>
                    <a
                        href="https://css-tricks.com/continuous-integration-the-what-why-and-how/"
                        id="cited-06"
                        >[6] Jeff Wainwright, "Continuous Integration: The What, Why and How",
                        публикуван: 2018-10-25 , последно посетен : 2020-04-05</a
                    >
                </p>
            </section>
            <section id="figure-list">
                <h2>Списък с фигури</h2>
                <p>
                    <a href="#figure-01">Фигура 1. Уеб сайта на JavaScript Lint, секция "News"</a>
                </p>
                <p>
                    <a href="#figure-02">Фигура 2. JavaScript Lint online</a>
                </p>
                <p>
                    <a href="#figure-03">Фигура 3. JavaScript Lint CLI опции</a>
                </p>
                <p>
                    <a href="#figure-04">Фигура 4. Тествания JavaScript файл</a>
                </p>
                <p>
                    <a href="#figure-05">Фигура 5. Резултата от изпълнението на файла</a>
                </p>
                <p>
                    <a href="#figure-06">Фигура 6. Изход от JavaScript Lint</a>
                </p>
                <p>
                    <a href="#figure-07">Фигура 7. Поправен JavaScript файл</a>
                </p>
                <p>
                    <a href="#figure-08"
                        >Фигура 8. Изход от изпълнението на файла и JavaScript Lint</a
                    >
                </p>
            </section>
            <section id="tables-list">
                <h2>Списък с таблици</h2>
                <p>
                    <a href="#table-01">Таблица 1. Опциите на JavaScript Lint</a>
                </p>
            </section>
            <section id="code-fragments-list">
                <h2>Списък с примерен програмен код</h2>
                <p>
                    <a
                        href="https://gist.github.com/ivanchuchulski/5024340534d0dd59d8009134442d5f94"
                        id="code-01"
                        >Код 1. Тест на онлайн инструмента</a
                    >
                </p>
                <p>
                    <a
                        href="https://gist.github.com/ivanchuchulski/c71065ecd48486d8741702b10fae726d"
                        id="code-02"
                        >Код 2. Batch файл</a
                    >
                </p>
                <p>
                    <a
                        href="https://gist.github.com/ivanchuchulski/72d9a85d7eb1edcc78dd83ebe6d53a62"
                        id="code-03"
                        >Код 3. Конфигурационен файл за JavaScript Lint</a
                    >
                </p>
                <p>
                    <a
                        href="https://gist.github.com/ivanchuchulski/7c2b572054b70b1b81060b7724579c56"
                        id="code-04"
                        >Код 4. Тест на JavaScript Lint</a
                    >
                </p>
                <p>
                    <a
                        href="https://gist.github.com/ivanchuchulski/b1f2bca9d16909acb437777058faaee8"
                        id="code-05"
                        >Код 5. Поправен тест на JavaScript Lint</a
                    >
                </p>
            </section>
        </article>
    </body>
</html>
